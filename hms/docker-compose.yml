version: '3.6'

networks:
  hms:
    external: false
  caddy:
    external: true

services:
  muximux:
    image: linuxserver/muximux:latest
    container_name: muximux
    restart: always
    env_file:
      - '../env/common.env'
    expose:
      - '80'
    volumes:
      - '${USERDIR}/volumes/muximux/config:/config:z'
    networks: 
      - 'hms'
      - 'caddy'
      
  
  jellyfin:
    image: linuxserver/jellyfin:latest
    container_name: jellyfin
    restart: always
    env_file:
      - '../env/common.env'
    expose:
      - '8096'
    ports:
      # - '8096:8096'
      - '7359:7359/udp' # for clients to discover
      - '1900:1900/udp' # DLNA clients
    volumes:
      - '${USERDIR}/volumes/jellyfin/config:/config:z'
      - '${USERDIR}/media/tv-shows:/data/tv-shows'
      - '${USERDIR}/media/movies:/data/movies'
    networks: 
      - 'hms'
      - 'caddy'

  radarr:
    image: linuxserver/radarr:latest
    container_name: radarr
    hostname: radarr
    expose:
      - '7878'
    # ports:
    #   - 7878:7878
    restart: always
    env_file:
      - '../env/common.env'
    volumes:
      - '${USERDIR}/volumes/radarr/config:/config:z'
      - '${USERDIR}/downloads/completed:/downloads'
      - '${USERDIR}/media/movies:/movies'
      - '/etc/localtime:/etc/localtime:ro'
    networks: 
      - 'hms'
      - 'caddy'

  sonarr:
    image: linuxserver/sonarr:version-3.0.6.1265
    container_name: sonarr
    hostname: sonarr
    expose:
      - '8989'
    # ports: 
    #   - 8989:8989
    restart: always
    env_file:
      - '../env/common.env'
    volumes:
      - '${USERDIR}/volumes/sonarr/config:/config:z'
      - '${USERDIR}/downloads/completed:/downloads'
      - '${USERDIR}/media/tv-shows:/tv-shows'
      - '/etc/localtime:/etc/localtime:ro'
    networks: 
      - 'hms'
      - 'caddy'

  prowlarr:
    image: linuxserver/prowlarr:nightly-version-0.1.0.688
    container_name: prowlarr
    restart: always
    expose:
      - '9696'
    # ports:
    #   - '9696:9696'
    env_file: 
      - '../env/common.env'
    networks:
      - 'hms'
      - 'caddy'


  # jackett:
  #   image: linuxserver/jackett:latest
  #   container_name: jackett
  #   hostname: jackett
  #   restart: always
  #   env_file:
  #     - '../env/common.env'
  #   expose:
  #     - '9117'
  #   volumes:
  #     - '${USERDIR}/volumes/radarr/config:/config:z'
  #   networks: 
  #     - 'hms'
  #     - 'caddy'

  torrent:
    image: 'linuxserver/qbittorrent:latest'
    container_name: torrent
    restart: always
    env_file:
      - '../env/common.env'
      - '../env/qbit.env'
    expose:
      - '8080'
    volumes:
      - '${USERDIR}/volumes/qbittorrent/config:/config:z'
      - '${USERDIR}/downloads/completed:/downloads'
    networks: 
      - 'hms'
      - 'caddy'
