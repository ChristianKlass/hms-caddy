version: '3.6'

networks:
  hms:
    external: true

services:
  muximux:
    image: linuxserver/muximux:version-057352e8
    container_name: muximux
    restart: always
    env_file:
      - '../env/common.env'
    expose:
      - '80'
    volumes:
      - '${USERDIR}/volumes/muximux/config:/config:z'
    networks: 
      - 'hms'
  
  jellyfin:
    image: linuxserver/jellyfin:nightly-version-20210618.8-unstable
    container_name: jellyfin
    restart: always
    env_file:
      - '../env/common.env'
    expose:
      - '8096'
    ports:
      - '8096:8096'
      - '7359:7359/udp' #for clients to discover
      - '1900:1900/udp' #DLNA clients
    volumes:
      - '${USERDIR}/volumes/jellyfin/config:/config:z'
      - '${USERDIR}/media/tv-shows:/data/tv-shows'
      - '${USERDIR}/media/movies:/data/movies'
    networks: 
      - 'hms'

  radarr:
    image: linuxserver/radarr:nightly-version-4.0.0.5093
    container_name: radarr
    hostname: radarr
    expose:
      - '7878'
    ports:
      - 7878:7878
    restart: always
    env_file:
      - '../env/common.env'
    volumes:
      - '${USERDIR}/volumes/radarr/config:/config:z'
      - '${USERDIR}/Downloads/completed:/downloads'
      - '${USERDIR}/media/movies:/movies'
      - '/etc/localtime:/etc/localtime:ro'
    networks: 
      - 'hms'

  sonarr:
    image: linuxserver/sonarr:version-3.0.6.1265
    container_name: sonarr
    hostname: sonarr
    expose:
      - '8989'
    ports: 
      - 8989:8989
    restart: always
    env_file:
      - '../env/common.env'
    volumes:
      - '${USERDIR}/volumes/sonarr/config:/config:z'
      - '${USERDIR}/Downloads/completed:/downloads'
      - '${USERDIR}/media/tv-shows:/tv-shows'
      - '/etc/localtime:/etc/localtime:ro'
    networks: 
      - 'hms'

  jackett:
    image: linuxserver/jackett:version-v0.18.364
    container_name: jackett
    hostname: jackett
    restart: always
    env_file:
      - '../env/common.env'
    expose:
      - '9117'
    volumes:
      - '${USERDIR}/volumes/radarr/config:/config:z'
    networks: 
      - 'hms'

  torrent:
    image: 'linuxserver/qbittorrent:latest'
    container_name: torrent
    restart: always
    env_file:
      - '../env/common.env'
      - '../env/qbit.env'
    expose:
      - '8080'
    volumes:
      - '${USERDIR}/volumes/qbittorrent/config:/config:z'
      - '${USERDIR}/Downloads/completed:/downloads'
    networks: 
      - 'hms'
